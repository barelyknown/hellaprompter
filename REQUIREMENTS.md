# App Requirements

## Project Overview
- **App Name**: hellaprompter
- **Purpose**: To create a static website of articles that have been generated based on prompts.
- **Target Audience**: This is a personal project that will be open-sourced.

## Functional Requirements
- There will be a directory of prompts (articles). In that directory should be a directory for each prompt.
- Each prompt directory should contain:
  - A `completion.md` file that contains the article generated by the prompt.
  - A `completion.txt` file that contains the raw, unformatted article text.
  - A `metadata.json` file that contains metadata about the prompt.
    - `prompt`: The prompt that was used to generate the article.
    - `title`: The title of the article (a short version of the prompt).
    - `date`: The date the prompt was created.
    - `service`: The name of the service that was used to generate the article.
    - `illustration`: (Boolean) Flag indicating whether this prompt should include a New Yorker-style cartoon.
    - `illustrationPath`: Path to the selected cartoon image file (added after generation).
    - `sceneDescription`: Description of the scene used to generate the illustrations.
    - `illustrationExplanation`: Explanation of why the selected illustration was chosen.
- Each prompt directory may optionally contain:
  - An illustration image file in New Yorker-style (for prompts with `illustration: true`).
- There should be a script that generates a static website:
  - Home page:
    - A list of all the prompts in reverse chronological order.
    - The title of the article should be a link to the article.
    - The date should be displayed next to the title.
    - A search bar should be available to search for prompts that are related.
  - Article page:
    - The title of the article should be displayed at the top.
    - The article should be displayed below the title.
    - The full prompt and service info should be available on the page, but not displayed by default or prominent.
    - The prompt text should be rendered as markdown.
    - For prompts with illustrations, a New Yorker-style cartoon should be displayed between the prompt and the article content.
  - About page:
    - A brief description of the project and it's creator (just a short bio and link to my X profile)

## Technical Requirements
- **Frontend**: The front end should be built using vanilla HTML, CSS, and JavaScript.
- **Search**: The search functionality should be implemented using JavaScript. Everything should be done on the client side.
- **Styling**: The styling should be done using CSS. There is no need for a CSS framework.
- **Framework**: There is no framework. The website will be generated statically.
- **Backend**: There is no backend. The website will be generated statically.
- **Database**: There is no database. The data will be stored in prompts directory.
- **Deployment**: The generation will happen in a GitHub Action, and will be hosted on GitHub pages.
- **Asset Fingerprinting**: CSS and JS files should be fingerprinted with MD5 hashes to prevent caching issues.
- **Markdown Rendering**: Both prompt content and article content should be rendered as markdown.
- **Content Formatting**: A script should automatically format raw completion text into proper markdown, cleaning special characters for browser compatibility.
- **Illustrations**: 
  - A script should generate New Yorker-style cartoon illustrations for prompts marked for illustration.
  - The illustration generation process should involve three phases:
    1. **Scene Description**: Use OpenAI API to generate a New Yorker-style scene description based on the prompt and completion content.
    2. **Image Generation**: Use Ideogram API with the 2a model at 21:11 resolution to generate multiple cartoon options.
    3. **Selection**: Use OpenAI API to select the best illustration that represents the prompt/completion in a characteristic New Yorker style.
  - Illustrations should be saved as files in the prompt directories, not just referenced by URL.
  - The selected illustration path should be recorded in the prompt's metadata.

## UI/UX Requirements
- **Design Style**: The design should be extremely plain, like an old technical blog that has been around for a while and will be around for a while.
- **Navigation**: There should be a navigation bar at the top of the page with links to the home page, about page, and a link to the GitHub repository.
- **Responsiveness**: The website should work well on mobile or desktop size devices.